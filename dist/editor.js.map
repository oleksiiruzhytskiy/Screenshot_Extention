{"version":3,"file":"editor.js","mappings":";;;;;;;;;;AAAa;AACb;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;;;;;;;;UE1ID;UACA;UACA;UACA;UACA","sources":["webpack://screenshot_extention/./src/editor.ts","webpack://screenshot_extention/webpack/before-startup","webpack://screenshot_extention/webpack/startup","webpack://screenshot_extention/webpack/after-startup"],"sourcesContent":["\"use strict\";\n// import Cropper from 'cropperjs';\n//@ts-nocheck\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const imgElement = document.getElementById(\"screenshotImage\");\n    const downloadBtn = document.getElementById(\"downloadBtn\");\n    const rotateToRightBtn = document.getElementById(\"rotateToRight\");\n    const rotateToLeftBtn = document.getElementById(\"rotateToLeft\");\n    const zoomInBtn = document.getElementById(\"zoomInBtn\");\n    const zoomOutBtn = document.getElementById(\"zoomOutBtn\");\n    const cropBtn = document.getElementById(\"cropBtn\");\n    if (!imgElement || !downloadBtn) {\n        console.error(\"‚ùå –û—à–∏–±–∫–∞: –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!\");\n        return;\n    }\n    let cropper;\n    let originalImageBlob;\n    let croppedImageBlob;\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Blob –∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è\n    const getImageBlob = (src) => {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onload = () => {\n                const canvas = document.createElement(\"canvas\");\n                const ctx = canvas.getContext(\"2d\");\n                if (!ctx)\n                    return reject(\"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ canvas\");\n                canvas.width = img.width;\n                canvas.height = img.height;\n                ctx.drawImage(img, 0, 0);\n                canvas.toBlob((blob) => {\n                    if (!blob)\n                        return reject(\"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å Blob\");\n                    resolve(blob);\n                }, \"image/png\");\n            };\n            img.onerror = () => reject(\"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è\");\n            img.src = src;\n        });\n    };\n    chrome.storage.local.get(\"screenshot\", (data) => {\n        if (data.screenshot) {\n            imgElement.src = data.screenshot;\n            imgElement.onload = () => __awaiter(void 0, void 0, void 0, function* () {\n                try {\n                    originalImageBlob = yield getImageBlob(imgElement.src);\n                    console.log(\"üñº –ò—Å—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –≤ Blob!\");\n                }\n                catch (error) {\n                    console.error(error);\n                }\n                cropper = new Cropper(imgElement, {\n                    aspectRatio: NaN,\n                    viewMode: 2,\n                    responsive: true,\n                    autoCropArea: 1,\n                    ready() {\n                        console.log(\"Cropper –≥–æ—Ç–æ–≤!\");\n                    },\n                    crop(event) {\n                        console.log(\"–û–±—Ä–µ–∑–∫–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞!\", event.detail);\n                    },\n                });\n            });\n        }\n        else {\n            console.error(\"‚ùå –°–∫—Ä–∏–Ω—à–æ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω!\");\n        }\n    });\n    const handleButtonClick = (action, value) => {\n        if (cropper) {\n            switch (action) {\n                case \"rotate\":\n                    cropper.rotate(value);\n                    break;\n                case \"zoom\":\n                    cropper.zoom(value);\n                    break;\n                default:\n                    console.error(\"‚ùå –ù–µ–≤–µ—Ä–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ\");\n            }\n        }\n    };\n    rotateToRightBtn.addEventListener(\"click\", () => handleButtonClick(\"rotate\", 90));\n    rotateToLeftBtn.addEventListener(\"click\", () => handleButtonClick(\"rotate\", -90));\n    zoomInBtn.addEventListener(\"click\", () => handleButtonClick(\"zoom\", 0.1));\n    zoomOutBtn.addEventListener(\"click\", () => handleButtonClick(\"zoom\", -0.1));\n    cropBtn === null || cropBtn === void 0 ? void 0 : cropBtn.addEventListener(\"click\", () => {\n        if (cropper) {\n            const canvas = cropper.getCroppedCanvas();\n            const cropperModal = document.querySelector(\".cropper-modal\");\n            if (cropperModal) {\n                cropperModal.style.opacity = '1';\n            }\n            else {\n                console.error(\"‚ùå –≠–ª–µ–º–µ–Ω—Ç .cropper-modal –Ω–µ –Ω–∞–π–¥–µ–Ω!\");\n            }\n            if (!canvas) {\n                console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è canvas\");\n                return;\n            }\n            canvas.toBlob((blob) => {\n                if (!blob) {\n                    console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Blob\");\n                    return;\n                }\n                croppedImageBlob = blob;\n                imgElement.src = URL.createObjectURL(croppedImageBlob);\n                console.log(\"üì∏ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—Ä–µ–∑–∞–Ω–æ!\");\n            }, \"image/png\");\n        }\n        else {\n            console.error(\"‚ùå Cropper –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!\");\n        }\n    });\n    downloadBtn.addEventListener(\"click\", () => {\n        const imageToDownload = croppedImageBlob || originalImageBlob;\n        if (!imageToDownload) {\n            console.error(\"‚ùå –ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!\");\n            return;\n        }\n        const link = document.createElement(\"a\");\n        link.href = URL.createObjectURL(imageToDownload);\n        link.download = \"screenshot.png\";\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        console.log(\"üì• –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!\");\n    });\n});\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[\"./src/editor.ts\"]();\n",""],"names":[],"sourceRoot":""}