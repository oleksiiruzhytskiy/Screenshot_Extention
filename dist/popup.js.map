{"version":3,"file":"popup.js","mappings":";;;;;AAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA,qCAAqC,oBAAoB;AACzD,aAAa;AACb;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,KAAK;AACL,CAAC","sources":["webpack://screenshot_extention/./src/popup.ts"],"sourcesContent":["\"use strict\";\nvar _a;\n(_a = document.getElementById(\"window\")) === null || _a === void 0 ? void 0 : _a.addEventListener(\"click\", () => {\n    navigator.mediaDevices\n        .getDisplayMedia({\n        video: {\n            //@ts-ignore\n            mediaSource: \"screen\", // –∏–ª–∏ \"window\", \"screen\" ‚Äî –¥–ª—è –≤—Å–µ–≥–æ —ç–∫—Ä–∞–Ω–∞, \"window\" ‚Äî –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞\n        },\n    })\n        .then((stream) => {\n        const track = stream.getVideoTracks()[0];\n        const imageCapture = new ImageCapture(track);\n        imageCapture.grabFrame().then((imageBitmap) => {\n            const canvas = document.createElement(\"canvas\");\n            const ctx = canvas.getContext(\"2d\");\n            if (!ctx) {\n                console.error(\"‚ùå –û—à–∏–±–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ canvas.\");\n                return;\n            }\n            canvas.width = imageBitmap.width;\n            canvas.height = imageBitmap.height;\n            ctx.drawImage(imageBitmap, 0, 0);\n            const dataUrl = canvas.toDataURL();\n            // ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ `chrome.storage`\n            chrome.storage.local.set({ screenshot: dataUrl }, () => {\n                console.log(\"dataUrl\", dataUrl);\n                console.log(\"üì∑ –°–∫—Ä–∏–Ω—à–æ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!\");\n                // ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ\n                chrome.tabs.create({ url: \"editor.html\" });\n            });\n            track.stop();\n        });\n    })\n        .catch((error) => {\n        console.error(\"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞:\", error);\n    });\n});\n"],"names":[],"sourceRoot":""}